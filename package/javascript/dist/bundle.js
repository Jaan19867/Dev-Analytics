!function(){if(!document)return;const e=document.currentScript,t="https://backend.vedanalytics.in/api/",n=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),a=e.getAttribute("data-project"),o=e.getAttribute("data-api-key");let r=n(),i=0,s=Date.now(),c=!1;const l=history.pushState,d=history.replaceState,p=()=>{r=n(),i=0,s=Date.now(),c=!1},u=(e,t,n)=>{const a={value:t,expiry:n?Date.now()+1e3*n:null};localStorage.setItem(e,JSON.stringify(a))},h=e=>function(t,n,a){a&&location.pathname!==new URL(a,location.href).pathname?(m(),p(),e.apply(this,arguments),v()):e.apply(this,arguments)},v=async()=>{const e=(e=>(e=>{const t=localStorage.getItem(e);if(!t)return null;try{const n=JSON.parse(t);return n.expiry&&Date.now()>n.expiry?(localStorage.removeItem(e),null):n.value}catch(t){return localStorage.removeItem(e),null}})(e)?(u(e,Date.now(),86400),!1):(u(e,Date.now(),86400),!0))(a);sessionStorage.getItem("eventCalled")?fetch(t+"event/newEvent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({i:r,r:document.referrer,v:e,p:location.href,k:!0,u:a,t:Intl.DateTimeFormat().resolvedOptions().timeZone})}):(fetch(t+"event/newEvent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({i:r,r:document.referrer,v:e,p:location.href,k:!1,u:a,t:Intl.DateTimeFormat().resolvedOptions().timeZone})}),sessionStorage.setItem("eventCalled","true"))},m=()=>{c||navigator.sendBeacon(t+"event/endEvent",JSON.stringify({i:r,u:a,m:Date.now()-s})),c=!0};"onpagehide"in self?addEventListener("pagehide",m,{capture:!0}):(addEventListener("beforeunload",m,{capture:!0}),addEventListener("unload",m,{capture:!0})),addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?i=Date.now():(s+=Date.now()-i,i=0)}),{capture:!0}),v(),e.getAttribute("data-hash")?addEventListener("hashchange",v,{capture:!0}):(history.pushState=h(l),history.replaceState=h(d),addEventListener("popstate",(()=>{m(),p(),v()}),{capture:!0}))}();